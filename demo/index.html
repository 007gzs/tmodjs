<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<title>Demo WebApp</title>
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet" type="text/css" href="./css/app.css">
<link rel="stylesheet" type="text/css" href="./css/ios6.css">
</head>

<body>

<div id="activitys"></div>

<script src="./tpl/build/template.js"></script>

<script src="./js/app.js"></script>
<script>
var app = new App({
    activityContainer: '#activitys'
});

app.createActivity('home', function (activity) {

    activity.onstart = function () {
        var html = template('home/index', {});
        activity.setContent(html);
    };

    activity.ondestroy = function () {
        activity.setContent('');
    };

    var start = activity.start.bind(activity);

    this.addRouter('', start);
    this.addRouter('!/', start);
    this.addRouter('!/home', start);
});



app.createActivity('detail', function (activity) {

    activity.onstart = function (id) {
        var html = template('detail/index');
        activity.setContent(html);
    };

    activity.ondestroy = function () {
        activity.setContent('');
    };

    var start = activity.start.bind(activity);

    this.addRouter('!/detail', start);
    this.addRouter('!/detail/:id', start);
});

app.createActivity('singer', function (activity) {

    activity.onstart = function (id) {
        var html = template('singer/index');
        activity.setContent(html);
    };

    activity.ondestroy = function () {
        activity.setContent('');
    };

    var start = activity.start.bind(activity);

    this.addRouter('!/singer/:id', start);
});


app.createActivity('404', function (activity) {
    activity.onstart = function (argument) {
        console.log('activity 显示:' + this.id);
    }
    activity.onstart = function () {
        var html = template('404/index');
        activity.setContent(html);
    }
    this.addRouter('404', function () {
        activity.start();
    });
});


app.start();
</script>
</body>
</html>
