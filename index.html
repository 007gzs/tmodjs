<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Atc by cdc-im</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Atc</h1>
          <h2>Template Compiler Tools</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/cdc-im/atc/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/cdc-im/atc/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/cdc-im/atc" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>atc-前端模板预编译器</h1>

<p><a href="http://cdc-im.github.io/atc">http://cdc-im.github.io/atc</a></p>

<h1></h1>

<h2>前言</h2>

<p>随着 HTML5 时代到来，前端技术在不断的发展壮大，我们为此欣喜若狂。但作为一名前端开发者，我们也不无时无刻的感受到很多看似平常的技术在 js 中仍然难以实现，其中之一便是模板技术：</p>

<pre><code>&lt;!--template/index.html--&gt;
&lt;%include('./public/header')%&gt;
&lt;h3&gt;&lt;%=title%&gt;&lt;/h3&gt;
&lt;ul&gt;
    &lt;% for (i = 0; i &lt; list.length; i ++) { %&gt;
       &lt;li&gt;
            &lt;a href="&lt;%= list[i].url %&gt;"&gt;
                &lt;%= list[i].title %&gt;
            &lt;/a&gt;
       &lt;/li&gt;
    &lt;% } %&gt;
&lt;/ul&gt;
&lt;%include('./public/footer')%&gt;
</code></pre>

<p>虽然我们已经有了很多优秀的前端模板引擎可以选择，但前端模板技术与服务器模板技术却完全不是一个层面的东西。受浏览器限制，模板按文件与目录组织与 include 这些基本的特性几乎无法实现，我们的最佳实践方式是把模板全部通过<code>&lt;script type="text/html" ..</code>标签写在页面里面。</p>

<p>随着应用越来越复杂、模板越来越多、模板各种依赖出现的时候，我们的页面也变得臃肿不堪、难以维护，以至于我们不得不拿出各种技巧进行所谓优化，如抽离到js中、按需加载等。回过头再来看这些最佳实践，我们不经意之间为了解决一个问题引发了更多的问题，如跨域部署、依赖管理、压缩、按需加载、请求合并等。</p>

<p>辛苦的忙碌后，这时候是不是会怀念服务端那种按目录、文件简单的模板组织方式呢？其实，前端模板完全可以做到！</p>

<h2>关于 atc</h2>

<p>atc 即 artTemplate compiler，基于 <a href="https://github.com/aui/artTemplate">artTemplate</a> 实现的前端模板预编译器，使用它可以让前端模版不再受浏览器的限制，支持如后端模版一样按文件放置、include语句等特性。</p>

<p>编译后的模板不再依赖模板引擎，模板可以通过 <a href="http://seajs.org">SeaJS</a> 或 <a href="http://requirejs.org">RequireJS</a> 等加载器进行异步加载，亦能利用它们成熟的打包合并工具进行上线前的优化。</p>

<h2>三分钟入门</h2>

<p>首先 <a href="https://github.com/aui/atc/archive/master.zip">下载 atc</a> 并解压。</p>

<ul>
<li>  compiler.cmd --- Windows 绿色批处理版本</li>
<li>  compiler.js --- NodeJS 跨平台版</li>
</ul><p>跑一个测试例子就能明白如何使用了：</p>

<h3>运行示例</h3>

<p>批处理版本双击即可运行，打开后它会自动编译<code>./demo/templates/</code>中所有模板文件，并生成同名 js 文件。(<a href="http://nodejs.org">NodeJS</a> 版本使用<code>node compiler.js</code>运行)</p>

<p>编译结束后你可以打开<code>./demo/index.html</code>，看其模板被浏览器加载的过程。</p>

<p>模板预编译一切就这么简单！</p>

<p><a href="http://cdc-im.github.io/atc/demo/">在线查看编译好的示例</a></p>

<h2>模板语法</h2>

<p>atc 是 <a href="https://github.com/aui/artTemplate">artTemplate</a> 的子项目，语法也与其保持一致，亦可通过它的插件简化模板语法。完整的模板语法可参考其 <a href="https://github.com/aui/artTemplate">文档</a>。</p>

<h2>设置配置</h2>

<p>右键可直接编辑编译工具的源码修改配置：</p>

<pre><code>// 设置前端模板目录路径
var $path = './demo/templates/';

// 设置待处理的模版编码
var $charset = 'UTF-8';

// 设置辅助方法编译方式：为true则克隆到每个编译后的文件中，为false则单独输出到文件
var $cloneHelpers = false;
</code></pre>

<h2>模板include语句规范</h2>

<p>为了让编译工具能够进行静态分析，需要如下约定：</p>

<ol>
<li> 路径参数不能带后缀名</li>
<li> 路径参数不能够进行动态拼装</li>
</ol><p><strong>错误的写法：</strong></p>

<pre><code>&lt;%include('./index.html')%&gt; 
&lt;%include('./tmpl-' + type)%&gt;
&lt;%include(path)%&gt;
</code></pre>

<h1></h1>

<p>© cdc.tencent.com</p>
        </section>

        <footer>
          Atc is maintained by <a href="https://github.com/cdc-im">cdc-im</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>